<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã€éå¹´ç”Ÿå­˜äººæ ¼ã€‘ä½ åœ¨å®¶æ—ä¸­æ˜¯ä»€éº¼è§’è‰²ï¼Ÿ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-red: #b30000;
            --card-bg: #fffbf0;
            --primary: #d32f2f;
            --gold: #ffb300;
            --dark-gold: #bfa36f;
            --jade-green: #00695c;
            --pink: #f48fb1;
            --text: #4a0e0e;
            --border-color: #590d0d;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-red);
            background-image: 
                linear-gradient(135deg, #cc0000 25%, transparent 25%),
                linear-gradient(225deg, #cc0000 25%, transparent 25%),
                linear-gradient(45deg, #cc0000 25%, transparent 25%),
                linear-gradient(315deg, #cc0000 25%, transparent 25%);
            background-position: 10px 0, 10px 0, 0 0, 0 0;
            background-size: 20px 20px;
            background-repeat: repeat;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text);
            overflow-x: hidden;
        }

        .cloud-bg {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 50 Q25 25 50 50 T90 50' stroke='%23ffb300' stroke-width='2' fill='none' opacity='0.3'/%3E%3C/svg%3E");
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        .confetti {
            position: absolute;
            width: 10px; height: 10px;
            background-color: var(--gold);
            animation: fall linear infinite;
            opacity: 0;
            z-index: 99;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        #app {
            width: 100%;
            max-width: 480px;
            height: 100vh;
            max-height: 900px;
            background: var(--card-bg);
            position: relative;
            overflow-y: auto;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            border-left: 8px solid var(--border-color);
            border-right: 8px solid var(--border-color);
            z-index: 10;
            display: flex;
            flex-direction: column;
        }

        /* ç‡ˆç± æ¨£å¼ */
        .lantern {
            position: absolute;
            top: -10px;
            width: 60px;
            height: 50px;
            background: var(--primary);
            border-radius: 20px;
            border: 2px solid var(--gold);
            z-index: 20;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: swing 3s infinite ease-in-out;
            transform-origin: top center;
        }
        .lantern::before { content: ''; position: absolute; top: -5px; left: 20px; width: 20px; height: 5px; background: var(--border-color); }
        .lantern::after { content: ''; position: absolute; bottom: -20px; left: 25px; width: 10px; height: 20px; background: var(--gold); border-radius: 0 0 5px 5px; }
        .lantern.left { left: 20px; animation-delay: 0s; }
        .lantern.right { right: 20px; animation-delay: 1.5s; }

        @keyframes swing {
            0% { transform: rotate(5deg); }
            50% { transform: rotate(-5deg); }
            100% { transform: rotate(5deg); }
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            display: flex;
            width: 100%;
            padding: 16px;
            font-size: 1.1rem;
            font-weight: 900;
            text-align: center;
            color: #fff;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 12px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn:active { transform: scale(0.98); }
        .btn:disabled { opacity: 0.7; cursor: wait; filter: grayscale(50%); }

        .btn-primary { background: linear-gradient(to bottom, #e53935, #c62828); border: 2px solid var(--gold); box-shadow: 0 4px 0 #8e0000; }
        
        /* ç¶ è‰²åˆ†äº«æŒ‰éˆ• (æ”¹ç‚ºç”Ÿæˆåœ–ç‰‡) */
        .btn-green {
            background: linear-gradient(to bottom, #43a047, #2e7d32);
            border: 2px solid #a5d6a7;
            box-shadow: 0 4px 0 #1b5e20;
            color: #fff;
        }

        /* æ¡ƒèŠ±ç²‰ */
        .btn-pink { 
            background: linear-gradient(to bottom, #f06292, #ec407a); 
            border: 2px solid #f8bbd0; 
            box-shadow: 0 4px 0 #880e4f; 
            color: #fff;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.1);
        }

        /* æ´»åŠ›é»ƒ */
        .btn-yellow { 
            background: linear-gradient(to bottom, #fff176, #fbc02d); 
            border: 2px solid #fff9c4; 
            box-shadow: 0 4px 0 #f57f17; 
            color: #4e342e;
        }

        .btn-outline { background: transparent; border: 1px solid rgba(0,0,0,0.1); color: #888; box-shadow: none; margin-top: 20px; font-size: 0.9rem; }

        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Home & Quiz Layout */
        #home-screen { padding: 60px 20px 20px; text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: space-between; background-image: radial-gradient(circle at center, rgba(255,215,0,0.1) 0%, transparent 70%); }
        .home-content { margin-top: auto; margin-bottom: auto; width: 100%; }
        .hero-title { font-family: 'Noto Sans TC', sans-serif; font-weight: 900; font-size: 3.5rem; color: var(--primary); text-shadow: 3px 3px 0 var(--gold); line-height: 1.2; margin-bottom: 20px; transform: rotate(-2deg); }
        .hero-subtitle { font-size: 1.4rem; font-weight: 700; color: #fff; background: var(--text); display: inline-block; padding: 8px 20px; border-radius: 50px; margin-bottom: 30px; box-shadow: 3px 3px 0 rgba(0,0,0,0.2); }
        .tag-cloud { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .tag { background: #fff; border: 2px solid var(--primary); color: var(--primary); padding: 5px 12px; font-size: 0.9rem; font-weight: bold; border-radius: 20px; }

        #quiz-screen { padding: 80px 20px 20px; min-height: 100vh; display: flex; flex-direction: column; }
        .progress-bar { width: 100%; height: 12px; background: #eee; border: 2px solid var(--border-color); margin-bottom: 30px; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.2) 10px, rgba(255,255,255,0.2) 20px); }
        .q-number { font-family: 'Noto Sans TC', sans-serif; font-weight: 900; font-size: 1.5rem; color: var(--primary); margin-bottom: 10px; display: block; }
        .q-text { font-size: 1.3rem; font-weight: 700; line-height: 1.5; color: var(--text); margin-bottom: 20px; }
        .option-btn { background: #fff; border: 2px solid var(--border-color); padding: 18px; margin-bottom: 15px; font-size: 1.1rem; text-align: left; cursor: pointer; transition: all 0.2s; border-radius: 10px; position: relative; color: var(--text); }
        .option-btn:hover { background: #fff5f5; border-color: var(--primary); transform: translateX(5px); }
        .option-btn::before { content: 'ğŸ§§'; display: inline-block; margin-right: 10px; font-size: 1.2rem; }

        /* çµæœé  */
        #result-screen { padding: 0; background: var(--border-color); min-height: 100vh; display: flex; flex-direction: column; align-items: center; }
        
        /* æˆªåœ–å°ˆç”¨å®¹å™¨ */
        #capture-wrapper {
            background-color: #fffbf0;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d32f2f' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            width: 100%;
            position: relative;
            padding-top: 60px; /* çµ¦ç‡ˆç±  */
            padding-bottom: 20px; /* çµ¦ç‰ˆæ¬Š */
        }

        .result-card {
            width: 100%;
            padding: 20px 40px; 
            text-align: center;
            position: relative;
            background: transparent;
        }

        #capture-wrapper .lantern { top: 20px; }

        .corner-decor { position: absolute; width: 50px; height: 50px; pointer-events: none; }
        .tl { top: 15px; left: 15px; border-top: 4px solid var(--primary); border-left: 4px solid var(--primary); border-radius: 10px 0 0 0; }
        .tr { top: 15px; right: 15px; border-top: 4px solid var(--primary); border-right: 4px solid var(--primary); border-radius: 0 10px 0 0; }
        .bl { bottom: 15px; left: 15px; border-bottom: 4px solid var(--primary); border-left: 4px solid var(--primary); border-radius: 0 0 0 10px; }
        .br { bottom: 15px; right: 15px; border-bottom: 4px solid var(--primary); border-right: 4px solid var(--primary); border-radius: 0 0 10px 0; }

        /* å‹•ç•« */
        .reveal-item { opacity: 0; transform: translateY(20px); animation: slideUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .reveal-delay-1 { animation-delay: 0.2s; }
        .reveal-delay-2 { animation-delay: 0.4s; }
        .reveal-delay-3 { animation-delay: 0.6s; }
        .reveal-delay-4 { animation-delay: 0.8s; }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* Snapshot æ¨¡å¼ */
        .snapshot-mode .reveal-item { opacity: 1 !important; transform: none !important; animation: none !important; }

        .role-badge { background: var(--text); color: var(--gold); padding: 5px 15px; font-weight: 700; border-radius: 4px; display: inline-block; margin-bottom: 10px; font-size: 0.9rem; letter-spacing: 1px; border: 1px solid var(--gold); }
        .role-title { font-family: 'Noto Sans TC', sans-serif; font-weight: 900; font-size: 3.5rem; color: var(--primary); margin: 5px 0; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }
        .role-img-container { width: 140px; height: 140px; margin: 10px auto 20px; border-radius: 50%; background: radial-gradient(circle, #fff 40%, #ffecb3 70%); border: 4px solid var(--gold); display: flex; justify-content: center; align-items: center; box-shadow: 0 0 20px rgba(255, 179, 0, 0.4); }
        .role-img { font-size: 5rem; animation: bounce 2s infinite; }
        .role-quote { font-size: 1.2rem; font-weight: 700; color: var(--text); background: rgba(255, 179, 0, 0.15); padding: 8px 15px; border-radius: 8px; display: inline-block; margin-bottom: 25px; }
        
        .role-desc-card { background: #fff; border: 2px dashed var(--dark-gold); border-radius: 12px; padding: 20px; margin-bottom: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .role-desc { font-size: 1.15rem; line-height: 1.8; color: #2c0b0b; text-align: justify; font-weight: 500; margin: 0; }

        .analysis-box { background: #fff; border-left: 5px solid var(--primary); padding: 15px 20px; text-align: left; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); border-radius: 0 8px 8px 0; }
        .analysis-title { font-weight: 900; color: var(--primary); margin-bottom: 5px; display: block; font-size: 1.1rem; }

        .relation-box { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .rel-item { background: #fff; border: 2px solid #e0e0e0; border-radius: 12px; padding: 15px 10px; position: relative; overflow: hidden; }
        .rel-item::before { content: ''; position: absolute; top: -10px; right: -10px; width: 40px; height: 40px; border-radius: 50%; opacity: 0.1; }
        .good-rel::before { background: var(--jade-green); }
        .bad-rel::before { background: var(--primary); }
        .rel-label { font-size: 0.8rem; color: #888; margin-bottom: 5px; display: block; }
        .rel-role { font-weight: 900; font-size: 1.3rem; display: block; }
        .good-rel .rel-role { color: var(--jade-green); }
        .bad-rel .rel-role { color: var(--primary); }

        .footer-cta { width: 100%; padding: 25px 20px 50px; background: #fffbf0; color: #333; text-align: center; border-top: 1px dashed var(--gold); }
        .global-footer { text-align: center; font-size: 0.75rem; color: rgba(0,0,0,0.4); margin-top: auto; padding: 20px; line-height: 1.5; width: 100%; }
        .footer-cta + .global-footer { background: #fffbf0; color: #888; }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        /* Modal æ¨£å¼ */
        #image-modal {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        #image-modal.show { display: flex; animation: fadeIn 0.3s ease; }

        #generated-image {
            max-width: 90%;
            max-height: 80vh;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
            border: 2px solid var(--gold);
        }

        .modal-tip {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
            animation: pulse 2s infinite;
        }

        .modal-close {
            margin-top: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid #fff;
            color: #fff;
            padding: 10px 30px;
            border-radius: 50px;
            cursor: pointer;
        }

        @keyframes pulse { 0% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } 100% { opacity: 0.8; transform: scale(1); } }

    </style>
</head>
<body>

<div class="cloud-bg"></div>
<div id="confetti-container"></div>

<!-- åœ–ç‰‡å½ˆå‡ºè¦–çª— -->
<div id="image-modal">
    <div class="modal-tip">ğŸ‘† è«‹é•·æŒ‰åœ–ç‰‡ï¼Œé¸æ“‡åˆ†äº«æˆ–å„²å­˜ ğŸ‘†</div>
    <img id="generated-image" alt="æ¸¬é©—çµæœ" />
    <button class="modal-close" onclick="closeModal()">é—œé–‰è¦–çª—</button>
</div>

<div id="app">
    <!-- å…¨åŸŸç‡ˆç±  -->
    <div class="lantern left" id="global-lantern-l"></div>
    <div class="lantern right" id="global-lantern-r"></div>

    <!-- 1. é¦–é  -->
    <div id="home-screen" class="fade-in">
        <div class="home-content">
            <div class="tag-cloud">
                <span class="tag">#éå¹´</span>
                <span class="tag">#è¦ªæˆš</span>
                <span class="tag">#ç”Ÿå­˜æŒ‡å—</span>
            </div>
            <div class="hero-title">éå¹´ç”Ÿå­˜<br>äººæ ¼æ¸¬è©¦</div>
            <div class="hero-subtitle">ä½ åœ¨å®¶æ—ä¸­æ˜¯ä»€éº¼è§’è‰²ï¼Ÿ</div>
            <img src="https://api.iconify.design/noto:firecracker.svg" style="width: 100px; margin: 10px auto; display:block; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2));">
            <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 40px; color: var(--text);">
                å¹´å¤œé£¯æ˜¯ä¸€å ´æˆ°çˆ­ ğŸ§¨<br>å®¢å»³å°±æ˜¯ä½ çš„æˆ°å ´ ğŸ›‹ï¸<br>æ‰¾å‡ºä½ çš„ç”Ÿå­˜ä¹‹é“ ğŸ›¡ï¸<br>æ´»è‘—éå®Œé€™å€‹å¹´ï¼
            </p>
            <button class="btn btn-primary" onclick="startQuiz()">ğŸ”¥ é–‹å§‹æ¸¬è©¦ ğŸ”¥</button>
        </div>
        <div class="global-footer">
            Â© 2026 æ„›ç›Ÿå®¶åº­æ–‡æ•™åŸºé‡‘æœƒ<br>ç‚ºæ„›å­¸ç¿’æŒçºŒç·´ç¿’ï¼Œæ˜¯ä¸€ä»¶å¹¸ç¦çš„äº‹
        </div>
    </div>

    <!-- 2. æ¸¬é©—é  -->
    <div id="quiz-screen" class="hidden">
        <div style="flex: 1;">
            <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
            <div id="question-container"></div>
        </div>
        <div class="global-footer">
            Â© 2026 æ„›ç›Ÿå®¶åº­æ–‡æ•™åŸºé‡‘æœƒ<br>ç‚ºæ„›å­¸ç¿’æŒçºŒç·´ç¿’ï¼Œæ˜¯ä¸€ä»¶å¹¸ç¦çš„äº‹
        </div>
    </div>

    <!-- 3. çµæœé  -->
    <div id="result-screen" class="hidden">
        
        <!-- æˆªåœ–ç¯„åœ (éš±è—åœ¨ç•«é¢å¤–ï¼Œä½†å¯è¢«æ¸²æŸ“) -->
        <div id="capture-wrapper">
            <!-- å…§åµŒç‡ˆç±  -->
            <div class="lantern left"></div>
            <div class="lantern right"></div>

            <div class="result-card">
                <div class="corner-decor tl"></div><div class="corner-decor tr"></div><div class="corner-decor bl"></div><div class="corner-decor br"></div>
                
                <div class="reveal-item"><div class="role-badge">ç¶“ LuvBar æ¸¬è©¦ä½ çš„è§’è‰²æ˜¯</div></div>
                
                <div class="reveal-item reveal-delay-1">
                    <div class="role-img-container"><div class="role-img" id="res-icon">ğŸ‘»</div></div>
                    <h2 class="role-title" id="res-title">éš±å½¢äºº</h2>
                </div>

                <div class="reveal-item reveal-delay-2">
                    <div class="role-quote" id="res-quote">"ä½ çœ‹ä¸åˆ°æˆ‘...ä½ çœ‹ä¸åˆ°æˆ‘..."</div>
                    <div class="role-desc-card"><div class="role-desc" id="res-desc">è¼‰å…¥ä¸­...</div></div>
                </div>

                <div class="reveal-item reveal-delay-3">
                    <div class="analysis-box">
                        <span class="analysis-title">ğŸ’¡ æ„›çš„é—œä¿‚ç¶“ç‡Ÿæ–¹é‡</span>
                        <p id="res-advice" style="font-size: 0.95rem; line-height: 1.5; margin:0; color: #333;">å»ºè­°å…§å®¹...</p>
                    </div>
                </div>

                <div class="reveal-item reveal-delay-4">
                    <div class="relation-box">
                        <div class="rel-item good-rel"><span class="rel-label">ğŸ˜ æœ€ä½³éšŠå‹</span><span class="rel-role" id="res-best">å»šæˆ¿å®ˆè­·è€…</span></div>
                        <div class="rel-item bad-rel"><span class="rel-label">ğŸ’€ å¤©ç”Ÿå‰‹æ˜Ÿ</span><span class="rel-role" id="res-worst">å…¬é—œç¶“ç†</span></div>
                    </div>
                    
                    <div style="text-align: center; font-size: 0.9rem; color: #888; margin-top: 15px; line-height: 1.5; font-weight: bold; padding-bottom: 10px;">
                        Â© 2026 æ„›ç›Ÿå®¶åº­æ–‡æ•™åŸºé‡‘æœƒ<br>ç‚ºæ„›å­¸ç¿’æŒçºŒç·´ç¿’ï¼Œæ˜¯ä¸€ä»¶å¹¸ç¦çš„äº‹
                    </div>
                </div>
            </div>
        </div>

        <div class="footer-cta reveal-item reveal-delay-4">
            <p style="margin-bottom: 15px; font-size: 1.1rem; font-weight: bold;">è¦ºå¾—æº–å—ï¼Ÿåˆ†äº«çµ¦æœ‹å‹ä¸€èµ·æ¸¬é©—ï¼</p>
            
            <!-- ç¶ è‰²åˆ†äº«æŒ‰éˆ• -->
            <button class="btn btn-green" id="share-btn" onclick="generateAndShowImage()">
                ğŸ ç”Ÿæˆçµæœå¡ç‰‡ (é•·æŒ‰å­˜åœ–)
            </button>
            
            <button class="btn btn-pink" onclick="window.open('https://line.me/ti/g2/QdcpjzvhMBkwRsceEkFdyP97e-fNqA8Pn_9G2w?utm_source=invitation&utm_medium=link_copy&utm_campaign=default', '_blank')">
                ğŸ’Œ åŠ å…¥ LuvBar æˆ€æ„›æŒ‡å—
            </button>
            
            <button class="btn btn-yellow" onclick="window.open('https://lcf.oen.tw/', '_blank')">
                ğŸ¤“ æœ€æ–°æƒ…ç·’åŠ›èª²ç¨‹
            </button>
            
            <button class="btn btn-outline" onclick="location.reload()">ğŸ”„ å†æ¸¬ä¸€æ¬¡</button>
        </div>
    </div>

</div>

<script>
    // === é¡Œç›®èˆ‡çµæœè³‡æ–™ ===
    const questions = [
        { id: 1, text: "å¹´å¤œé£¯å‰›é–‹å§‹ï¼Œä¸€ä½è¦ªæˆšå¤§è²å•ï¼šã€Œå•Šä½ ç¾åœ¨å¹´çµ‚é ˜å¤šå°‘ï¼Ÿæœ‰æ²’æœ‰æ¯”å»å¹´å¤šï¼Ÿã€ä½ çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ", options: [ { text: "ç¬‘è‘—èªªï¼šã€Œå¤ åŒ…çµ¦æ‚¨çš„ç´…åŒ…åŠ ç¢¼å•¦ï¼ã€å¤§å®¶é–‹å¿ƒå°±å¥½ã€‚", type: "PR" }, { text: "é»˜é»˜æå‡ºä¸€å€‹ç´…åŒ…å¡çµ¦ä»–æ—é‚Šçš„å°å­©ï¼šã€Œä¾†ï¼Œæ‹¿å»è²·ç³–åƒã€‚ã€(è½‰ç§»æ³¨æ„åŠ›)", type: "ATM" }, { text: "çªç„¶ç«™èµ·ä¾†ï¼šã€Œå•Šï¼æ¹¯å¥½åƒæ»¾äº†ï¼Œæˆ‘å»å»šæˆ¿çœ‹ä¸€ä¸‹ï¼ã€", type: "Chef" }, { text: "å‡è£æ²’è½åˆ°ï¼Œä½é ­çŒ›æ‰’é£¯ï¼Œæˆ–æ˜¯å‰›å¥½æˆ´è‘—è€³æ©Ÿã€‚", type: "Ghost" } ] },
        { id: 2, text: "å®¢å»³è£¡ï¼Œå…©å€‹é•·è¼©é–‹å§‹ç‚ºäº†æ”¿æ²»è­°é¡Œåµæ¶ï¼Œæ°£æ°›é€æ¼¸æ¯æ¹¯ã€‚ä½ æœƒï¼Ÿ", options: [ { text: "ç«‹åˆ»æ’è©±ï¼šã€Œæ¬¸å°äº†ï¼Œå§‘å§‘ä¸Šæ¬¡åœ˜è³¼çš„é‚£å€‹è›‹ç³•å¥½å¥½åƒï¼Œé‚„æœ‰å—ï¼Ÿã€", type: "PR" }, { text: "å¤§å–Šï¼šã€Œå¥½äº†å¥½äº†ï¼èª°å…ˆæ›è©±é¡Œæˆ‘ç­‰ä¸‹è«‹èª°å–æ˜Ÿå·´å…‹ï¼ã€", type: "ATM" }, { text: "é»˜é»˜é£„å»å»šæˆ¿åˆ‡æ°´æœï¼šã€Œä¾†ä¾†ä¾†ï¼Œåƒæ°´æœæ¶ˆæ¶ˆæ°£ï½ã€", type: "Chef" }, { text: "è—‰å£ä¸Šå»æ‰€ï¼Œç„¶å¾Œåœ¨å»æ‰€è£¡æ»‘æ‰‹æ©Ÿæ»‘äº† 20 åˆ†é˜ã€‚", type: "Ghost" } ] },
        { id: 3, text: "ç™¼ç´…åŒ…ç’°ç¯€åˆ°äº†ï¼Œé€™æ˜¯éå¹´æœ€ã€Œè‚‰ç—›ã€ä½†ä¹Ÿæœ€æ ¸å¿ƒçš„æ™‚åˆ»ã€‚ä½ çš„ç­–ç•¥æ˜¯ï¼Ÿ", options: [ { text: "æ¯ä¸€åŒ…éƒ½å¯«ä¸Šè²¼å¿ƒçš„ç¥ç¦èªï¼ŒéŒ¢ä¸ä¸€å®šæœ€å¤šï¼Œä½†å¿ƒæ„è¦åšè¶³ã€‚", type: "PR" }, { text: "å…¨éƒ¨åŒ…åšä¸€é»ï¼ŒéŒ¢èƒ½è§£æ±ºçš„å°·å°¬éƒ½ä¸æ˜¯å°·å°¬ã€‚", type: "ATM" }, { text: "ã€Œæˆ‘åœ¨å¿™è‘—æ´—ç¢—å•¦ï¼Œç­‰ä¸€ä¸‹å†çµ¦ï¼ã€èƒ½æ‹–å°±æ‹–ã€‚", type: "Chef" }, { text: "è¢«å«åˆ°åå­—æ‰å‡ºç¾ï¼Œæ‹¿äº†å°±è·‘ï¼Œçµ•ä¸çœ¼ç¥æ¥è§¸ã€‚", type: "Ghost" } ] },
        { id: 4, text: "é æˆ¿å¬¸å¬¸çªç„¶æƒ³å¹«ä½ ä»‹ç´¹å°è±¡/å•ä½ ç‚ºä»€éº¼é‚„ä¸ç”Ÿå°å­©ã€‚ä½ å¿ƒè£¡æƒ³çš„æ˜¯ï¼Ÿ", options: [ { text: "é›–ç„¶å¿ƒè£¡ç¿»ç™½çœ¼ï¼Œä½†é‚„æ˜¯ç¦®è²Œåœ°èªªï¼šã€Œè¬è¬å¬¸å¬¸é—œå¿ƒï¼Œç·£åˆ†åˆ°äº†å°±æœƒæœ‰äº†ï½ã€", type: "PR" }, { text: "ã€Œç”Ÿå°å­©å¾ˆèŠ±éŒ¢è€¶ï¼Œå¬¸å¬¸è¦è´ŠåŠ©å¥¶ç²‰éŒ¢å—ï¼Ÿã€", type: "ATM" }, { text: "ã€Œå“å‘€æ°´æœæ²’äº†ï¼Œæˆ‘å†å»åˆ‡ä¸€ç›¤ï¼ã€(å†æ¬¡é€ƒé€²å»šæˆ¿)", type: "Chef" }, { text: "çœ¼ç¥æ”¾ç©ºï¼Œéˆé­‚å·²ç¶“é£„åˆ°å¤–å¤ªç©ºï¼Œå®Œå…¨æ²’è½é€²å»ã€‚", type: "Ghost" } ] },
        { id: 5, text: "çµ‚æ–¼çµæŸäº†ï¼å›åˆ°è‡ªå·±çš„æˆ¿é–“ï¼Œä½ åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ï¼Ÿ", options: [ { text: "ç™¼å€‹ IG é™å‹•ï¼šã€Œä»Šå¤©å®¶æ—èšæœƒå¤§æˆåŠŸï¼å¤§å®¶éƒ½å¾ˆé–‹å¿ƒï¼ã€", type: "PR" }, { text: "æ‰“é–‹ç¶²éŠ€ç¢ºèªé¤˜é¡ï¼Œå¿ƒåœ¨æ·Œè¡€ï¼Œä½†è‡³å°‘è€³æ ¹æ¸…æ·¨äº†ã€‚", type: "ATM" }, { text: "çµ‚æ–¼å¯ä»¥åä¸‹ä¾†å¥½å¥½åƒåŒ…é¤…ä¹¾ï¼Œå‰›å‰›åœ¨å»šæˆ¿éƒ½åœ¨å¿™æ²’åƒåˆ°ã€‚", type: "Chef" }, { text: "æ‰‹æ©Ÿé›»é‡å‰© 10%ï¼Œäººé«”é›»é‡å‰© 0%ã€‚ç›´æ¥èººå¹³ã€‚", type: "Ghost" } ] }
    ];

    const roles = {
        PR: { title: "å…¬é—œç¶“ç†", icon: "ğŸ¤", quote: "ã€Œä¼¸æ‰‹ä¸æ‰“ç¬‘è‡‰äººï¼Œæ°£æ°›æˆ‘ä¾†æ‰›ï¼ã€", desc: "ä½ æ˜¯å®¶æ—çš„æ½¤æ»‘åŠ‘ï¼Œæ“…é•·è¦‹äººèªªäººè©±ï¼Œè¦‹é¬¼èªªé¬¼è©±ã€‚åªè¦æœ‰ä½ åœ¨ï¼Œå ´é¢å°±ä¸æœƒå°·å°¬ã€‚é›–ç„¶å¿ƒè£¡å¯èƒ½ç´¯å¾—åŠæ­»ï¼Œä½†è¡¨é¢ä¸Šæ°¸é ç¶­æŒè‘—å®Œç¾çš„ç¬‘å®¹ã€‚", advice: "ä½ çš„é«˜ EQ è®“äººä½©æœï¼Œä½†è¨˜å¾—åˆ¥éåº¦æ¶ˆè€—è‡ªå·±ã€‚æœ‰æ™‚å€™ï¼Œè®“æ°£æ°›ç¨å¾®ä¹¾ä¸€ä¸‹æ²’é—œä¿‚ï¼Œä½ ä¸å¿…å°æ‰€æœ‰äººçš„æƒ…ç·’è² è²¬ã€‚", best: "ææ¬¾æ©Ÿ", worst: "éš±å½¢äºº" },
        ATM: { title: "äººé«”ææ¬¾æ©Ÿ", icon: "ğŸ’°", quote: "ã€Œèƒ½ç”¨éŒ¢è§£æ±ºçš„ï¼Œéƒ½ä¸æ˜¯å•é¡Œã€‚ã€", desc: "ä½ æ·±çŸ¥éå¹´çš„æœ¬è³ªå°±æ˜¯ã€Œé‡‘æµæµå‹•ã€ã€‚ä½ ä¸å–œæ­¡å»¢è©±ï¼Œç¿’æ…£ç”¨ç´…åŒ…ã€è«‹å®¢ã€è²·å–®ä¾†å µä½è¦ªæˆšçš„å˜´ã€‚é›–ç„¶è·åŒ…åœ¨å“­ï¼Œä½†ä½ äº«å—é‚£ç¨®ã€Œæˆ‘ä»˜éŒ¢æˆ‘è€å¤§ã€çš„æ¸…éœã€‚", advice: "éŒ¢å¾ˆå¥½ç”¨ï¼Œä½†æ„›ç›Ÿæé†’ä½ ï¼šçœŸèª çš„é€£çµä¹Ÿå¾ˆé‡è¦ã€‚ä¸‹æ¬¡è©¦è‘—å¤šèªªå¹¾å¥å¿ƒè£¡è©±ï¼Œä¹Ÿè¨±æœƒç™¼ç¾ä¸ç”¨èŠ±éŒ¢ä¹Ÿèƒ½ç²å¾—å°Šé‡å–”ï¼", best: "å…¬é—œç¶“ç†", worst: "å»šæˆ¿å®ˆè­·è€…" },
        Chef: { title: "å»šæˆ¿å®ˆè­·è€…", icon: "ğŸ³", quote: "ã€Œé€™è£¡(å»šæˆ¿)æ˜¯æˆ‘å”¯ä¸€çš„æ·¨åœŸã€‚ã€", desc: "æ¯”èµ·é¢å°å®¢å»³çš„éˆé­‚æ‹·å•ï¼Œä½ å¯§é¡˜é¢å°æ²¹è†©çš„ç¢—ç›¤ã€‚å»šæˆ¿æ˜¯ä½ çµ•å°çš„é˜²ç©ºæ´ï¼Œåˆ‡æ°´æœã€æ´—ç¢—ã€ç…®æ°´é¤ƒï¼Œåªè¦æ‰‹ä¸Šæœ‰äº‹åšï¼Œå°±æ²’äººèƒ½å«ä½ éå»èŠå¤©ã€‚", advice: "è¾›è‹¦äº†ï¼ä½ æ˜¯èšæœƒä¸­æœ€ä¸å¯æˆ–ç¼ºçš„äººã€‚ä½†ä¹Ÿåˆ¥å¿˜äº†ï¼Œä½ å€¼å¾—åä¸‹ä¾†å¥½å¥½åƒé “é£¯ã€‚è©¦è‘—èµ°å‡ºå»šæˆ¿ 5 åˆ†é˜ï¼Œèªªä¸å®šä»Šå¹´çš„è¦ªæˆšæ²’é‚£éº¼å¯æ€•ï¼Ÿ", best: "éš±å½¢äºº", worst: "ææ¬¾æ©Ÿ" },
        Ghost: { title: "å°ˆæ¥­éš±å½¢äºº", icon: "ğŸ‘»", quote: "ã€Œä½ çœ‹ä¸åˆ°æˆ‘...ä½ çœ‹ä¸åˆ°æˆ‘...ã€", desc: "ä½ æ“æœ‰é«˜è¶…çš„ã€Œä½å­˜åœ¨æ„Ÿã€æŠ€èƒ½ã€‚ä½ å¯èƒ½ååœ¨è§’è½ï¼Œæˆ–è€…é•·æ™‚é–“å¾…åœ¨å»æ‰€ã€‚ä½ å°å®¶æ—å…«å¦æ²’èˆˆè¶£ï¼Œåªæƒ³å®‰éœåœ°æ»‘æ‰‹æ©Ÿåº¦éé€™ä¸€åˆ‡ã€‚", advice: "ä¿è­·è‡ªå·±çš„èƒ½é‡ç©ºé–“æ˜¯å¾ˆæ£’çš„è¦ºå¯Ÿï¼ä½†å¦‚æœä¸€ç›´å°é–‰ï¼Œå¯èƒ½æœƒéŒ¯éçœŸæ­£é—œå¿ƒä½ çš„äººã€‚è©¦è‘—å°é‚£å€‹ä¹Ÿèº²åœ¨è§’è½çš„å ‚å¼Ÿç¬‘ä¸€ä¸‹å§ï¼", best: "å»šæˆ¿å®ˆè­·è€…", worst: "å…¬é—œç¶“ç†" }
    };

    let scores = { PR: 0, ATM: 0, Chef: 0, Ghost: 0 };
    let currentQ = 0;
    
    function startQuiz() {
        document.getElementById('home-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        loadQuestion();
        createConfetti();
    }

    function createConfetti() {
        const container = document.getElementById('confetti-container');
        container.innerHTML = ''; 
        for (let i = 0; i < 20; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
            confetti.style.backgroundColor = Math.random() > 0.5 ? '#ffb300' : '#d32f2f';
            container.appendChild(confetti);
        }
    }

    function loadQuestion() {
        const q = questions[currentQ];
        const progressPct = ((currentQ) / questions.length) * 100;
        document.getElementById('progress').style.width = `${progressPct}%`;
        document.getElementById('question-container').innerHTML = `
            <div class="question-card fade-in">
                <span class="q-number">ç¬¬ ${q.id} é¡Œ / å…± 5 é¡Œ</span>
                <div class="q-text">${q.text}</div>
            </div>
            <div>${q.options.map(opt => `<div class="option-btn" onclick="answer('${opt.type}')">${opt.text}</div>`).join('')}</div>
        `;
    }

    function answer(type) {
        scores[type]++;
        currentQ++;
        if (currentQ < questions.length) {
            loadQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        let maxScore = -1;
        let finalRole = 'PR';
        for (const [role, score] of Object.entries(scores)) {
            if (score > maxScore) { maxScore = score; finalRole = role; }
        }
        const data = roles[finalRole];

        document.getElementById('res-title').innerText = data.title;
        document.getElementById('res-icon').innerText = data.icon;
        document.getElementById('res-quote').innerText = data.quote;
        document.getElementById('res-desc').innerText = data.desc;
        document.getElementById('res-advice').innerText = data.advice;
        document.getElementById('res-best').innerText = data.best;
        document.getElementById('res-worst').innerText = data.worst;

        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('progress').style.width = `100%`;
        
        document.getElementById('global-lantern-l').style.display = 'none';
        document.getElementById('global-lantern-r').style.display = 'none';
        
        createConfetti();
    }

    // ç”Ÿæˆä¸¦é¡¯ç¤ºåœ–ç‰‡ï¼ˆæœ€å¯é çš„è·¨å¹³å°æ–¹æ¡ˆï¼‰
    function generateAndShowImage() {
        const btn = document.getElementById('share-btn');
        const originalText = btn.innerText;
        btn.innerText = "âŸ³ è£½ä½œå¡ç‰‡ä¸­...";
        btn.disabled = true;

        const targetElement = document.getElementById('capture-wrapper');
        
        html2canvas(targetElement, {
            backgroundColor: "#fffbf0",
            scale: 2, 
            useCORS: true,
            onclone: (clonedDoc) => {
                // æˆªåœ–æ™‚æš«åœç‡ˆç± å‹•ç•«ï¼Œé¿å…éŒ¯ä½
                const lanterns = clonedDoc.querySelectorAll('.lantern');
                lanterns.forEach(l => l.style.animation = 'none');
                
                // å¼·åˆ¶é¡¯ç¤ºæ‰€æœ‰å‹•ç•«å…ƒç´ 
                const items = clonedDoc.querySelectorAll('.reveal-item');
                items.forEach(item => {
                    item.style.opacity = '1';
                    item.style.transform = 'none';
                    item.style.animation = 'none';
                });
            }
        }).then(canvas => {
            const dataUrl = canvas.toDataURL("image/png");
            
            // è¨­ç½®åœ–ç‰‡åˆ° Modal
            document.getElementById('generated-image').src = dataUrl;
            
            // é¡¯ç¤º Modal
            document.getElementById('image-modal').classList.add('show');
            
            // æ¢å¾©æŒ‰éˆ•
            btn.innerText = originalText;
            btn.disabled = false;

        }).catch(err => {
            console.error(err);
            alert("åœ–ç‰‡è£½ä½œå¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†è©¦è©¦ï¼");
            btn.innerText = originalText;
            btn.disabled = false;
        });
    }

    function closeModal() {
        document.getElementById('image-modal').classList.remove('show');
    }

</script>

</body>
</html>